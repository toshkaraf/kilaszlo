# KILASZLO - Первый запуск

## Быстрый старт

### 1️⃣ Установка зависимостей

```bash
cd C:\dev\projects\kilaszlo
flutter pub get
```

### 2️⃣ Получение API ключа Anthropic

1. Перейдите на https://console.anthropic.com/
2. Войдите в свой аккаунт (создайте если нужно)
3. Скопируйте API ключ (начинается с `sk-ant-`)

### 3️⃣ Добавление ключа в приложение

Откройте файл `lib/services/anthropic_service.dart` и замените:

```dart
static const String _apiKey = 'YOUR_ANTHROPIC_API_KEY';
```

На:

```dart
static const String _apiKey = 'sk-ant-YOUR_ACTUAL_KEY_HERE';
```

### 4️⃣ Запуск приложения

#### Для веба:
```bash
flutter run -d web
```

#### Для мобильного устройства (если подключено):
```bash
flutter run
```

#### Для эмулятора:
```bash
# Сначала запустить эмулятор
flutter emulators --launch emulator_name

# Затем запустить приложение
flutter run
```

---

## Структура приложения

```
📦 KILASZLO/
│
├── 📄 lib/
│   ├── 📄 main.dart                    ← Точка входа
│   ├── 📁 models/
│   │   ├── theme_data.dart            ← Иерархия всех тем (1000+)
│   │   └── chat.dart                  ← Модели для чатов
│   │
│   ├── 📁 services/
│   │   ├── anthropic_service.dart     ← Интеграция с Claude AI
│   │   └── chat_storage_service.dart  ← Сохранение истории
│   │
│   ├── 📁 providers/
│   │   └── chat_provider.dart         ← Управление состоянием
│   │
│   └── 📁 pages/
│       ├── home_page.dart             ← Главный экран
│       ├── theme_selector_page.dart   ← Выбор тем
│       ├── chat_page.dart             ← Окно чата с озвучиванием
│       └── chat_history_page.dart     ← История чатов
│
├── 📄 pubspec.yaml                    ← Зависимости проекта
├── 📄 README.md                       ← Документация
├── 📄 DEPLOYMENT.md                   ← Как развернуть в интернете
└── 📄 CONFIG.md                       ← Конфигурация
```

---

## Структура данных в приложении

### Иерархия тем

```
🌍 ThemeCategory (11 категорий)
├── 📚 subcategories (от 2 до 20)
│   ├── 📖 Topic (от 10 до 100)
```

**Категории:**
1. ✅ История (8 периодов × ~10 тем)
2. ✅ Наука (6 областей × ~10 тем)
3. ✅ Техника (5 областей × ~10 тем)
4. ✅ Философия (4 области)
5. ✅ Литература (2 категории)
6. ✅ Психология (2 категории)
7. ✅ Экономика (2 категории)
8. ✅ Политология (2 категории)
9. ✅ Искусство (2 категории)
10. ✅ Природа (2 категории)
11. ✅ Спорт (2 категории)

---

## Как использовать приложение

### 🏠 Главный экран
```
    [KILASZLO]
  Интеллектуальный чат

┌─────────────────────────┐
│  📚 ВЫБРАТЬ ТЕМУ        │ ← Начать новый чат
└─────────────────────────┘

┌─────────────────────────┐
│  📜 ИСТОРИЯ ЧАТОВ       │ ← Продолжить старый
└─────────────────────────┘
```

### 📚 Выбор темы
1. Экран 1: Выбрать сферу (История, Наука, ...)
2. Экран 2: Выбрать подсферу (для истории: Древний мир, Средневековье, ...)
3. Экран 3: Выбрать конкретную тему (Древний Египет, Древняя Греция, ...)

### 💬 Окно чата

ИИ отправляет:
```
┌──────────────────────────────────┐
│ Информация от ИИ...              │
│ Текст, несколько предложений...  │
└──────────────────────────────────┘

   ┌─────────────────────┐
   │  🔊 ОЗВУЧИТЬ        │ ← Слушать сообщение
   └─────────────────────┘

Предложенные направления для разговора:
┌─────────────────────────────────┐
│  1. Первое направление...       │
├─────────────────────────────────┤
│  2. Второе направление...       │
├─────────────────────────────────┤
│  3. Третье направление...       │
├─────────────────────────────────┤
│  4. Четвертое направление...    │
├─────────────────────────────────┤
│  5. Пятое направление...        │
└─────────────────────────────────┘
```

Пользователь нажимает на любую кнопку → отправляется как сообщение → ИИ отвечает

### 📜 История чатов

```
📜 История чатов

┌─────────────────────────────┐
│ 🗛 Древний Египет          │
│ 24.01.2025 15:30            │
│ 12 сообщений                │
└─────────────────────────────┘

┌─────────────────────────────┐
│ 🗛 Квантовая механика       │
│ 24.01.2025 14:15            │
│ 8 сообщений                 │
└─────────────────────────────┘

[Нажать = продолжить чат]
[Меню ⋯ = удалить]
```

---

## Возможные проблемы и решения

### ❌ Ошибка: "API Key not found"
**Решение**: Проверьте, что вы добавили API ключ в `anthropic_service.dart`

### ❌ Ошибка: "Failed to connect to anthropic.com"
**Решение**: Проверьте интернет-соединение и что API ключ валиден

### ❌ Озвучивание не работает
**Решение**: 
- Если на Android: проверьте что установлена система TTS
- На iOS: могут быть ограничения безопасности
- На веб: зависит от браузера

### ❌ История чатов не сохраняется
**Решение**: 
- На эмуляторе Android может не сохраняться
- На физическом устройстве должна работать
- Используйте `shared_preferences` package

### ❌ Приложение медленное
**Решение**: 
- Используйте `flutter run --release` для тестирования
- На эмуляторе всегда медленнее
- Проверьте скорость интернета для API запросов

---

## Тестирование

### Тестовые темы для быстрой проверки:
1. История → Древний мир → Древний Египет
2. Наука → Физика → Механика
3. Техника → Компьютеры → Интернет

---

## Где найти документацию?

- 📘 **Flutter**: https://flutter.dev/docs
- 📘 **Claude API**: https://docs.anthropic.com/
- 📘 **Provider package**: https://pub.dev/packages/provider
- 📘 **Flutter TTS**: https://pub.dev/packages/flutter_tts

---

## Следующие шаги

1. ✅ Запустить локально
2. ✅ Протестировать функционал
3. ✅ Развернуть на сервер (см. DEPLOYMENT.md)
4. ✅ Делиться с пользователем

---

**Успехов с KILASZLO! 🎉**
